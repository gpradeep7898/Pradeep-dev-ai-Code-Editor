<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MyIDE v3</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.min.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css"/>
  <link rel="stylesheet" href="css/style.css"/>
</head>
<body>

<!-- TITLEBAR -->
<header id="titlebar">
  <div id="tb-left">
    <span id="logo">✦ MyIDE</span>
    <button class="tb-btn" id="btnOpenFolder">
      <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
      Open Folder
    </button>
    <button class="tb-btn" id="btnNewFile">
      <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="12" y1="18" x2="12" y2="12"/><line x1="9" y1="15" x2="15" y2="15"/></svg>
      New File
    </button>
    <button class="tb-btn" id="btnSave">
      <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
      Save
    </button>
  </div>
  <div id="tb-center"><span id="active-file-path">No file open</span></div>
  <div id="tb-right">
    <div id="ollama-status">
      <span id="ollama-dot" class="status-dot offline"></span>
      <span id="ollama-label">Ollama</span>
    </div>
    <button class="tb-btn" id="btnToggleTerm">⌞ Terminal</button>
  </div>
</header>

<!-- WORKSPACE -->
<div id="workspace">

  <!-- SIDEBAR -->
  <aside id="sidebar">
    <div class="panel-hdr">
      <span class="panel-title">EXPLORER</span>
      <div class="panel-acts">
        <button class="icon-btn" id="btnRefreshTree" title="Refresh">↻</button>
      </div>
    </div>
    <div id="ws-path"></div>
    <div id="file-tree"><div class="tree-empty">Open a folder to start</div></div>
  </aside>

  <div class="v-resizer" id="res1"></div>

  <!-- MAIN AREA -->
  <div id="main-area">
    <div id="tab-bar">
      <div id="tab-list"></div>
    </div>
    <div id="editor-wrap">
      <div id="editor-placeholder">
        <div class="ph-icon">✦</div>
        <div class="ph-title">MyIDE v3</div>
        <div class="ph-sub">Open a file from the explorer, or press ⌘N to create one</div>
      </div>
      <div id="monaco-editor"></div>
    </div>
    <div class="h-resizer" id="res-term"></div>
    <div id="terminal-panel" class="term-collapsed">
      <div class="panel-hdr">
        <span class="panel-title">TERMINAL</span>
        <div class="panel-acts">
          <button class="icon-btn" id="btnNewTerm" title="New Terminal">+</button>
          <button class="icon-btn" id="btnHideTerm" title="Hide">⌄</button>
        </div>
      </div>
      <div id="terminal-container"></div>
    </div>
  </div>

  <div class="v-resizer" id="res2"></div>

  <!-- AI PANEL -->
  <aside id="ai-panel">
    <div class="panel-hdr">
      <span class="panel-title">AI ASSISTANT</span>
      <button class="icon-btn" id="btnClearChat">↺</button>
    </div>

    <div id="model-switcher">
      <button class="model-btn active" data-model="ollama">
        <span class="m-icon">⚡</span>
        <div class="m-info"><span class="m-name">Ollama</span><span class="m-sub" id="ollama-sub">local · free</span></div>
      </button>
      <button class="model-btn" data-model="claude">
        <span class="m-icon">◆</span>
        <div class="m-info"><span class="m-name">Claude</span><span class="m-sub">Sonnet</span></div>
      </button>
      <button class="model-btn" data-model="gpt">
        <span class="m-icon">⬡</span>
        <div class="m-info"><span class="m-name">GPT-4o</span><span class="m-sub">OpenAI</span></div>
      </button>
    </div>

    <div id="ollama-model-row">
      <label>Model:</label>
      <select id="ollamaModelSel"><option value="qwen2.5-coder:7b">qwen2.5-coder:7b</option></select>
    </div>

    <div id="ctx-row">
      <label class="toggle-lbl">
        <input type="checkbox" id="chkSendFile" checked/>
        <span>Send current file as context</span>
      </label>
    </div>

    <div id="chat-messages">
      <div class="chat-welcome">
        <div class="wl-logo">✦</div>
        <p><strong>MyIDE v3</strong> — Local AI, zero cost</p>
        <p class="wl-hint">Powered by Ollama · Claude · GPT-4o</p>
      </div>
    </div>

    <div id="chat-input-area">
      <div id="chat-input-wrap">
        <textarea id="chat-input" placeholder="Ask anything… ⌘↵ to send" rows="1"></textarea>
        <button id="btn-send">
          <svg width="15" height="15" viewBox="0 0 24 24" fill="currentColor"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
        </button>
      </div>
      <div id="chat-footer">
        <span id="active-model-lbl">⚡ Ollama</span>
        <span class="chat-hint">⌘↵ send · ⇧↵ newline</span>
      </div>
    </div>
  </aside>

</div>

<!-- TOAST -->
<div id="toast"></div>

<!-- MODAL -->
<div id="modal-overlay" class="hidden">
  <div id="modal-box">
    <div id="modal-title">Open Folder</div>
    <input id="modal-input" type="text" placeholder="e.g. /Users/you/myproject" autocomplete="off" spellcheck="false"/>
    <div id="modal-acts">
      <button class="btn-ghost" id="modal-cancel">Cancel</button>
      <button class="btn-primary" id="modal-confirm">Open</button>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
<script src="js/app.js"></script>
</body>
</html>
